<!-- =======================
     Step-by-Step Guide Header
     ======================= -->
     <h2><strong>Step-by-Step Guide: Controlling an RGB LED's Red Intensity Using PWM</strong></h2>
     <p>
       In this lab, you will interactively control the brightness of the red LED on your RGB module using Pulse Width Modulation (PWM). The brightness will be controlled by entering a value between 0 and 255, where 0 is off and 255 is fully bright. This range corresponds to the 8-bit color model commonly used in electronics.
     </p>
     
     <!-- =======================
          Step 2: Define Constants
          ======================= -->
     <h3><strong>1. Define Constants</strong></h3>
     <p>Next, we define some constants that will be used throughout the program.</p>
     <div style="background-color: #2e3440; padding: 10px; border-radius: 5px">
       <pre
         style="
           font-size: 18px;
           background-color: #2e3440;
           color: #d8dee9;
           padding: 10px;
           border-radius: 5px;
         "
       ><span style="color: #61afef;">RED_PIN</span> = <span style="color: #d19a66;">11</span> <span style="color: #98c379;"># The physical pin connected to the red LED</span>
          <span style="color: #61afef;">COLOR_RANGE</span> = <span style="color: #d19a66;">255</span> <span style="color: #98c379;"># The color range for an 8-bit color model (0 to 255)</span>
          <span style="color: #61afef;">PWM_FREQUENCY</span> = <span style="color: #d19a66;">2000</span> <span style="color: #98c379;"># Frequency of the PWM signal (in Hertz)</span>
              </pre>
     </div>
     <ul>
       <li>
         <code style="background-color: #2e3440; color: #d8dee9; padding: 2px 4px; border-radius: 3px;">RED_PIN</code>: The physical pin number on the Raspberry Pi board where the red LED is connected.
       </li>
       <li>
         <code style="background-color: #2e3440; color: #d8dee9; padding: 2px 4px; border-radius: 3px;">COLOR_RANGE</code>: The total number of color values available in an 8-bit model (from 0 to 255).
       </li>
       <li>
         <code style="background-color: #2e3440; color: #d8dee9; padding: 2px 4px; border-radius: 3px;">PWM_FREQUENCY</code>: The frequency at which the PWM signal will be generated.
       </li>
     </ul>
     
     <!-- =======================
          Step 3: Setup GPIO Pins
          ======================= -->
     <h3><strong>2. Set Up the GPIO Pins</strong></h3>
     <p>Now we configure the GPIO pins on the Raspberry Pi and prepare the pin for PWM.</p>
     <div style="background-color: #2e3440; padding: 10px; border-radius: 5px">
       <pre
         style="
           font-size: 18px;
           background-color: #2e3440;
           color: #d8dee9;
           padding: 10px;
           border-radius: 5px;
         "
       ><span style="color: #98c379;">GPIO.setmode</span>(<span style="color: #d19a66;">GPIO.BOARD</span>) <span style="color: #98c379;"># Use physical pin numbering</span>
          <span style="color: #98c379;">GPIO.setup</span>(<span style="color: #61afef;">RED_PIN</span>, <span style="color: #d19a66;">GPIO.OUT</span>) <span style="color: #98c379;"># Set the red LED pin as an output</span>
          <span style="color: #61afef;">RED_PWM</span> = <span style="color: #98c379;">GPIO.PWM</span>(<span style="color: #61afef;">RED_PIN</span>, <span style="color: #61afef;">PWM_FREQUENCY</span>) <span style="color: #98c379;"># Initialize PWM on the red pin</span>
              </pre>
     </div>
     
     <!-- =======================
          Step 4: Enter the Main Loop
          ======================= -->
     <h3><strong>3. Enter the Main Loop</strong></h3>
     <p>In the main part of the program, students will enter values to control the red LED's brightness.</p>
     <div style="background-color: #2e3440; padding: 10px; border-radius: 5px">
       <pre
         style="
           font-size: 18px;
           background-color: #2e3440;
           color: #d8dee9;
           padding: 10px;
           border-radius: 5px;
         "
       ><span style="color: #c678dd;">try</span>:
                   <span style="color: #c678dd;">while</span> <span style="color: #d19a66;">True</span>:
                       <span style="color: #61afef;">red_intensity</span> = <span style="color: #98c379;">int</span>(<span style="color: #98c379;">input</span>(<span style="color: #d19a66;">f"Enter a red intensity value (0 to {COLOR_RANGE}): "</span>))
                       
                       <!-- Step-by-step breakdown of the duty cycle calculation -->
                       <span style="color: #61afef;">intensity_percentage</span> = (<span style="color: #61afef;">red_intensity</span> / <span style="color: #61afef;">COLOR_RANGE</span>) * <span style="color: #d19a66;">100</span>
                       <span style="color: #98c379;">print</span>(<span style="color: #d19a66;">f"Intensity Percentage: {intensity_percentage}%"</span>)
                       
                       <span style="color: #61afef;">duty_cycle</span> = <span style="color: #d19a66;">100</span> - <span style="color: #61afef;">intensity_percentage</span>
                       <span style="color: #98c379;">print</span>(<span style="color: #d19a66;">f"Duty Cycle: {duty_cycle:.2f}%"</span>)
                       
                       <span style="color: #98c379;">RED_PWM.start</span>(<span style="color: #61afef;">duty_cycle</span>)
                       <span style="color: #98c379;">print</span>(<span style="color: #d19a66;">"PWM signal running. Press Ctrl+C to stop or input a new intensity value."</span>)
                   </pre>
     </div>
     
     <!-- =======================
          Step 4: Detailed Explanation
          ======================= -->
     <h4><strong>Detailed Explanation of duty_cycle Calculation</strong></h4>
     <p>
       The line
       <code style="background-color: #2e3440; color: #d8dee9; padding: 2px 4px; border-radius: 3px;">duty_cycle = (red_intensity / COLOR_RANGE) * 100</code>
       adjusts the LED brightness by calculating the intensity percentage. Here's how it works:
     </p>
     <ul>
       <li>
         <code style="background-color: #2e3440; color: #d8dee9; padding: 2px 4px; border-radius: 3px;">COLOR_RANGE</code>: This is the total number of color values (255), representing the full 8-bit range for the color intensity.
       </li>
       <li>
         <code style="background-color: #2e3440; color: #d8dee9; padding: 2px 4px; border-radius: 3px;">red_intensity</code>: This is the value input by the student, ranging from 0 (off) to 255 (fully on).
       </li>
     </ul>
     <p>
       In a normal system, the higher the intensity, the brighter the LED will be. Since we're using a <strong>low-side driver</strong>, the duty cycle needs to be inverted:
     </p>
     <ul>
       <li>
         Higher <code style="background-color: #2e3440; color: #d8dee9; padding: 2px 4px; border-radius: 3px;">red_intensity</code> (closer to 255) results in a lower duty cycle (the LED is brighter).
       </li>
       <li>
         Lower <code style="background-color: #2e3440; color: #d8dee9; padding: 2px 4px; border-radius: 3px;">red_intensity</code> (
     